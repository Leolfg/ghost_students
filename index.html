<html>
  <head>
    <script src="js/aframe.min.js"></script>
    <script src="js/aframe-extras.min.js"></script>
    <script src="js/aframe-event-set-component.min.js"></script>
    <script src ="js/proxy-event-delay.js"></script>
    <script src="js/model-opacity.js"></script>

    <script src="js/student-manager.js"></script>

  </head>
  <body>
    <a-scene color-space="sRGB" renderer="colorManagement: true;">
      <a-assets timeout="5000">

          <img id="intro" src="intro.png">
          <a-asset-item id="audio_student_1" response-type="arraybuffer" src="audio/student_1.mp3"></a-asset-item>
          <a-asset-item id="audio_student_2" response-type="arraybuffer" src="audio/student_2.mp3"></a-asset-item>
          <a-asset-item id="audio_student_3" response-type="arraybuffer" src="audio/student_3.mp3"></a-asset-item>
          <a-asset-item id="audio_student_4" response-type="arraybuffer" src="audio/student_4.mp3"></a-asset-item>
          <a-asset-item id="audio_student_5" response-type="arraybuffer" src="audio/student_5.mp3"></a-asset-item>
          <a-asset-item id="audio_student_6" response-type="arraybuffer" src="audio/student_6.mp3"></a-asset-item>
          <a-asset-item id="audio_student_7" response-type="arraybuffer" src="audio/student_7.mp3"></a-asset-item>
          <a-asset-item id="audio_student_8" response-type="arraybuffer" src="audio/student_8.mp3"></a-asset-item>
          <a-asset-item id="audio_student_9" response-type="arraybuffer" src="audio/student_9.mp3"></a-asset-item>
          <a-asset-item id="audio_student_10" response-type="arraybuffer" src="audio/student_10.mp3"></a-asset-item>

            <a-asset-item id="leo" src="models/characters/leo/leo_samba_rouge.gltf"></a-asset-item>
            <a-asset-item id="felix" src="models/characters/felix/felix_rouge.gltf"></a-asset-item>
            <a-asset-item id="tine_swim" src="models/characters/tine/tine_swim_rouge.gltf"></a-asset-item>
            <a-asset-item id="tine_dance" src="models/characters/tine/tine_anim_dance.gltf"></a-asset-item>
            <a-asset-item id="tine_sit" src="models/characters/tine/tine_site.gltf"></a-asset-item> 
            <a-asset-item id="alice" src="models/characters/alice/alice_anim_rouge.gltf"></a-asset-item>
            <a-asset-item id="faustine" src="models/characters/faustine/faustine_anim.gltf"></a-asset-item>
            
            <a-asset-item id="estienne" src="models/estienne/Estienne3.gltf"></a-asset-item>

        </a-assets>

      

      <a-entity id="estienne" gltf-model="#estienne" visible="true" position="-33.404 4.130 -23.70" scale="12 12 12"></a-entity>

      <a-entity id="student_1" gltf-model="#leo" model-opacity="1" scale="17 17 17" position="-1.7 0 -3.3" rotation="" animation-mixer="clip: ANIM_1"
      animation="property: model-opacity; startEvents: hidestudent1; dur: 2000; from: 1; to: 0; easing: easeInCubic;"></a-entity>
      <a-entity id="trigger_student_1" student-manager class="student_trigger" geometry="" material="color: blue; opacity: 0" position="-1.7 0.63251 -3.3" scale="" sound="src:#audio_student_1; on: click"
      event-set__hidetrigger1="_event: click; visible: false; class: activated_student_trigger"
      proxy-event__hidestudent1="event: click; to: #student_1; as: hidestudent1; delay: 5000"
      ></a-entity>
      
      <a-entity id="student_2" class="" gltf-model="models/characters/alice/alice_anim_rouge.gltf" scale="2.5 2.5 2.5" position="6.9 0.44 -15.69" rotation="" animation-mixer="clip: ANIM_1"
      animation="property: model-opacity; startEvents: hidestudent2; dur: 2000; from: 1; to: 0; easing: easeInCubic;"></a-entity>
      <a-entity id="trigger_student_2" student-manager  class="student_trigger" geometry="" material="color: blue; opacity: 0" position="7.00936 0.88807 -15.317" scale="1 1 1.8" sound="src: #audio_student_2; on: click"
      event-set__hidetrigger2="_event: click; visible: false; class: activated_student_trigger"
      proxy-event__hidestudent2="event: click; to: #student_2; as: hidestudent2; delay: 4000"
      ></a-entity>

      <a-entity id="student_3" class="" gltf-model="#felix" scale="17 17 17" position="-6.19713 5.73006 10.70071" rotation="" animation-mixer="clip: ANIM_1"
      animation="property: model-opacity; startEvents: hidestudent3; dur: 2000; from: 1; to: 0; easing: easeInCubic;"></a-entity>
      <a-entity id="trigger_student_3" student-manager class="student_trigger" geometry="" material="color: blue; opacity: 0" position="-6.2 6.4 10.7" scale="" sound="src: #audio_student_3; on: click"
      event-set__hidetrigger3="_event: click; visible: false; class: activated_student_trigger"
      proxy-event__hidestudent3="event: click; to: #student_3; as: hidestudent3; delay: 2000"
      ></a-entity>

      <a-entity id="student_4" class="" gltf-model="#tine_sit" scale="19 19 19" position="-19 8.5 3.4" rotation="0 60 0" animation-mixer="clip: SIT"
      animation="property: model-opacity; startEvents: hidestudent4; dur: 2000; from: 1; to: 0; easing: easeInCubic;"></a-entity>
      <a-entity id="trigger_student_4" student-manager class="student_trigger" geometry="" material="color: blue; opacity: 0" position="-18.88351 9.01751 3.49886" scale="0.6 0.6 0.6" sound="src: #audio_student_4; on: click"
      event-set__hidetrigger4="_event: click; visible: false; class: activated_student_trigger"
      proxy-event__hidestudent4="event: click; to: #student_4; as: hidestudent4; delay: 3000"
      ></a-entity>

      <a-entity id="student_5" class="" gltf-model="models/characters/faustine/faustine_anim.gltf" scale="3 3 3" position="-18.04384 -1.9808 36.65401" rotation="10 90 0" animation-mixer="clip: ANIM_1"
      animation="property: model-opacity; startEvents: hidestudent5; dur: 2000; from: 1; to: 0; easing: easeInCubic;"></a-entity>
      <a-entity id="trigger_student_5" student-manager class="student_trigger" geometry="" material="color: blue; opacity: 0" position="-17.88 -0.62775 36.638" scale="0.8 1.67 0.8" sound="src:#audio_student_5; on: click"
      event-set__hidetrigger5="_event: click; visible: false; class: activated_student_trigger"
      proxy-event__hidestudent5="event: click; to: #student_5; as: hidestudent5; delay: 2000"
      ></a-entity>

      <a-entity id="student_6" class="" gltf-model="#leo" scale="17 17 17" position="-15.56323 -1.175 -4.36999" rotation="" animation-mixer="clip: ANIM_1"
      animation="property: model-opacity; startEvents: hidestudent6; dur: 2000; from: 1; to: 0; easing: easeInCubic;"></a-entity>
      <a-entity id="trigger_student_6" student-manager class="student_trigger" geometry="" material="color: blue; opacity: 0" position="-15.3 -0.45 -4.12" scale="1 1.250 1" sound="src:#audio_student_6; on: click"
      event-set__hidetrigger6="_event: click; visible: false; class: activated_student_trigger"
      proxy-event__hidestudent6="event: click; to: #student_6; as: hidestudent6; delay: 5000"
      ></a-entity>

      <a-entity id="student_7" class="" gltf-model="#felix" scale="17 17 17" position="12.26 -0.66 30.26" rotation="" animation-mixer="clip: ANIM_1"
      animation="property: model-opacity; startEvents: hidestudent7; dur: 2000; from: 1; to: 0; easing: easeInCubic;"></a-entity>
      <a-entity id="trigger_student_7" student-manager class="student_trigger" geometry="" material="color: blue; opacity: 0" position="12.26 0.055 30.379" scale="1 1.35 1" sound="src: #audio_student_7; on: click"
      event-set__hidetrigger7="_event: click; visible: false; class: activated_student_trigger"
      proxy-event__hidestudent7="event: click; to: #student_7; as: hidestudent7; delay: 6000"
      ></a-entity>

      <a-entity id="student_8" class="" gltf-model="#alice" scale="2.5 2.5 2.5" position="-8.33834 -4.68163 35.62579" rotation="" animation-mixer="clip: ANIM_1"
      animation="property: model-opacity; startEvents: hidestudent8; dur: 2000; from: 1; to: 0; easing: easeInCubic;"></a-entity>
      <a-entity id="trigger_student_8" student-manager="" class="student_trigger" geometry="" material="color: blue; opacity: 0" position="-8.52856 -4.15287 36.06388" scale="1.03 1 2" sound="src: #audio_student_8; on: click" event-set__hidetrigger8="[object Object]" event-set__hidestudent8="[object Object]"
      event-set__hidetrigger8="_event: click; visible: false; class: activated_student_trigger"
      proxy-event__hidestudent8="event: click; to: #student_8; as: hidestudent8; delay: 4000"
      ></a-entity>

      <a-entity id="student_9" class="" gltf-model="#tine_dance" scale="17 17 17" position="-13.7 1 21.72" rotation="" animation-mixer="clip: DANCE"
      animation="property: model-opacity; startEvents: hidestudent9; dur: 2000; from: 1; to: 0; easing: easeInCubic;"></a-entity>
      <a-entity id="trigger_student_9" student-manager class="student_trigger" geometry="" material="color: blue; opacity: 0" position="-13.7 1.536 21.72" scale="" sound="src: #audio_student_9; on: click"
      event-set__hidetrigger9="_event: click; visible: false; class: activated_student_trigger"
      proxy-event__hidestudent9="event: click; to: #student_9; as: hidestudent9; delay: 13000"
      ></a-entity>

      <a-entity id="nul_tine_swim" position ="-10.8 20 11.025" scale="1 1 1" animation__1="property: rotation; from: 0 0 0; to: 0 -360 0; dur: 20000; loop: true; dir: normal; easing: linear">
        <a-entity id="student_10" class="" gltf-model="#tine_swim" scale="17 17 17" position="10 0 0" rotation="25 0 0" animation-mixer="clip: SWIM"
        animation="property: model-opacity; startEvents: hidestudent10; dur: 2000; from: 1; to: 0; easing: easeInCubic;"></a-entity>
        <a-entity id="trigger_student_10" student-manager class="student_trigger" geometry="" material="color: blue; opacity: 0" position="9.97665 0.44 0.12072" scale="1 0.5 1" sound="src:#audio_student_10; on: click"
        event-set__hidetrigger10="_event: click; visible: false; class: activated_student_trigger"
        proxy-event__hidestudent10="event: click; to: #student_10; as: hidestudent10; delay: 2000"
        ></a-entity>
      </a-entity>>

      <a-sky color="#ECECEC"></a-sky>

      <a-entity id="camera_rig" position="2.5 0.8 -8" rotation="-1 -212 0">
        <a-entity id="camera" position="" camera="active : true; fov: 50; near: 0.001" look-controls="pointerLockEnabled: true" wasd-controls="fly: true; acceleration: 95" rotation="">
              <a-entity id="cursor" cursor="fuse: true; fuseTimeout: 1000" position="0 0 -0.750" geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03" material="color: red; shader: flat" raycaster="objects: .student_trigger"
              animation__click="property: scale; startEvents: click; easing: easeInCubic; dur: 500; from: 0.1 0.1 0.1; to: 1 1 1"
              animation__fusing="property: scale; startEvents: fusing; easing: easeInCubic; dur: 1500; from: 1 1 1; to: 0.1 0.1 0.1"
              animation__mouseleave="property: scale; startEvents: mouseleave; easing: easeInCubic; dur: 500; to: 1 1 1"
              animation__clickcolor="property: material.color; startEvents: click; dur: 1; from: red; to: black;"
              animation__fusingcolor="property: material.color; startEvents: fusing; dur: 1; from: black; to: red;"
              animation__mouseleavecolor="property: material.color; startEvents: mouseleave; dur: 1; from: red; to: black;"
              ></a-entity>

                  <a-text id="score_text" score-init="" font="mozillavr" value="10" color="#ff0000" position="0.1717 0.19409 -0.48689" scale="0.1 0.1 0.1" text="align: right"></a-text>
                  <a-text id="etudiants_text" font="mozillavr" value="  /10 etudiants d'Estienne" color="#ff0000" position="0.176 0.19409 -0.48689" scale="0.1 0.1 0.1" text=""></a-text>
          <a-entity id="plane_fov" visible="false" geometry="primitive: plane" position="0 0 -0.5" scale="0.97961 0.46268 0.61225"></a-entity>
        </a-entity>
      </a-entity>

      <a-plane id="plane_intro" src="#intro" position="1.65  0.744 -6.6" material="shader: flat" geometry="" scale="2.569 1.28 0" rotation="0 150 0"
      animation__intro="property: opacity; startEvents: loaded; easing: easeInExpo; dur: 30000; from: 1; to: 0"
      ></a-plane>

      <a-entity id="camera_rig_2" position="0 20.81 -33.45" rotation="-23.6 -197 0">
        <a-entity id="camera_2" position="" rotation="" camera="active: false; fov: 50; near: 0.001">
            <a-text id="ending_text" font="mozillavr" color="#ff0000" position="0.00789 -0.13269 -0.48704" scale="0.1 0.1 0.1" text="value: Bravo ! Vous avez trouve tous les etudiants. Vous etes admis en DSAA, felicitations.; align: center" value="Bravo ! Vous avez trouve tous les etudiants. Vous voila admis en DSAA ! Felicitations."></a-text>
            <a-text id="ending_text_2" font="mozillavr" color="#ff0000" position="0.00789 -0.18395 -0.48704" scale="0.1 0.1 0.1" text="value: Et non, il n'y a pas d'accents sur cette police de caracteres.; align: center; wrapCount: 70" value="Et non, il n'y a effectivement pas d'accents sur cette police de caracteres."></a-text>
            <a-text id="ending_text_3" font="mozillavr" color="#ff0000" position="0.00789 -0.19839 -0.48704" scale="0.1 0.1 0.1" text="value: Avril 2020, Leo Laffargue, DSAA DCN 2; align: center; wrapCount: 70" value="Réalisé en Avril 2020 par Léo &quot;tresgrave_tm&quot; Laffargue, DSAA DCN 2"></a-text>
            <a-entity id="plane_fov_2" visible="" geometry="primitive: plane" position="0.00852 -0.18138 -0.52492" scale="0.52 0.135 0.00001" material="color: white; shader:  flat; blending: none"></a-entity>
        </a-entity>
      </a-entity>

    </a-scene>
  </body>
</html>